{% extends 'base.html' %}

{% block title %}Services - WebAgency{% endblock %}

{% block content %}
<div class="container">
    <h1 class="mb-4 text-center">Our Services</h1>
    <div class="grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
        {% for service in services %}
        <div class="card"
            style="background-color: var(--card-bg); padding: 2rem; border-radius: 0.5rem; box-shadow: var(--shadow); display: flex; flex-direction: column;">
            {% if service.image %}
            <img src="{{ service.image.url }}" alt="{{ service.title }}"
                style="width: 100%; height: 200px; object-fit: cover; border-radius: 0.5rem; margin-bottom: 1rem;">
            {% endif %}
            <h2>{{ service.title }}</h2>
            <p class="mt-2" style="flex-grow: 1;">{{ service.description }}</p>
            <p class="mt-4" style="font-size: 1.5rem; font-weight: bold; color: var(--primary-color);">${{ service.price }}</p>
            {% if user.is_authenticated and user.role == 'CUSTOMER' %}
            <a href="{% url 'buy_service' service.id %}" class="btn btn-primary mt-4 text-center">Buy Now</a>
            {% elif not user.is_authenticated %}
            <a href="{% url 'login' %}" class="btn btn-primary mt-4 text-center">Login to Buy</a>
            {% endif %}
        </div>
        {% empty %}
        <p class="text-center">No services available at the moment.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}